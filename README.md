# ldrd_virus_work

## LDRD DR Computational Work Repo

**Pre-Commit Procedure**
Linting pre-commit procedure prevents unnecessary CI/CD failures, but testing procedure is necessary as tests marked slow will not run in CI/CD. These must be run in pre-commit.

- Linting
```
>black viral_seq
>ruff check viral_seq --fix
>mypy -p viral_seq
```

- Testing
```
>cd /tmp
>python3 -m pytest --pyargs viral_seq
```

**Workflow Testing**
The full workflow is not automatically tested and should be occassionally tested locally:

1. Remove viral_seq in site-packages (so files will be generated by the workflow from scratch).
2. Reinstall viral_seq with pip (python3 -m pip install . from root directory)
3. Run the workflow with the following command:

```
>python3 viral_seq/run_workflow.py --cache 3 --debug
```

This will run the entire workflow with assertions on generated data which are not designed to be performative.
